<!DOCTYPE html>
<!--
    Copyright (c) 2012-2014 Adobe Systems Incorporated. All rights reserved.

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
     KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.
-->



<!--
Problems:

- making form > obs pages
- enabling disabled buttons when events have taken place
-->
<html>
<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
    <!-- <link rel="stylesheet" type="text/css" href="css/index.css" /> -->
    <link rel="stylesheet" type="text/css" href="css/first.css" />
    <link rel="stylesheet" type="text/css" href="css/jquery.mobile.icons.min.css" /> 
    <link rel="stylesheet" type="text/css" href="css/jquery.mobile.custom.structure.css" />


    <!-- <link rel="stylesheet" type="text/css" href="css/jquery.mobile.custom.theme.css" /> -->
    <title>Notebook App</title>
</head>
<body>
    <div data-role="page" id="homeloggedin">
        <div data-role="header" style="overflow:hidden;">
            <h1>Welcome!</h1>
            <a href="#homeloggedin" data-role="button" data-icon="home" class="ui-btn-right">Home</a>
        </div><!-- /header -->
        <div data-role="content">
            <div align="center">
                <h1>Field and Lab Notebook</h1>
                <h4>(c) Marcy S Weber</h4>
            </div>
            <p>This app is designed for studies and experiments requiring timed observations, such as animal behavioral studies. At the end of a session, the data recorded will be exported into an excel file and can be sent to any email address or dropbox.com account. </p>
        </div>


        <a href="#newsetup" class="ui-btn ui-shadow ui-btn-corner-all">Set Up A Session</a>
        <a href="#savedsessions" class="ui-btn ui-shadow ui-btn-corner-all" onclick="app.buttonpress();">Access Your Saved Sessions</a>

        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/jquery.js"></script>
        <script type="text/javascript" src="js/jquery.mobile.custom.js"></script>
        <script type="text/javascript" src="js/pouchdb-3.2.0.min.js"></script>
        <script type="text/javascript" src="js/dropbox-datastores-1.2.0.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script type="text/javascript">
            app.initialize();
        </script>
        <!-- // <script type="text/javascript" src="js/jquery.mobile.custom.js"></script> -->
    </div> <!-- /page-->

<!-- Start of second page 
    <div data-role="page" id="savedsetups">

        <div data-role="header">
            <h1>Field and Lab Notebook</h1>
            <a href="#homeloggedin" data-role="button" data-icon="home" class="ui-btn-right">Home</a>
        </div>     /header -->
<!--
        <div data-role="content">
            <div align="center"><p><h2>Your Saved Setups</h2></p></div>   
            <p>Here's where the saved setups would go for the account.</p>         
        </div> /content 
    </div>    /page -->



<!-- Start of New Setup page -->
    <div data-role="page" id="newsetup">
        <div data-role="header">
            <h1>Field and Lab Notebook</h1>
            <a href="#homeloggedin" data-role="button" data-icon="home" class="ui-btn-right">Home</a>
        </div><!-- /header -->

        <div data-role="content">
            <div align="center">
                <h2>Set Up Your Session</h2>
            </div>   
            <div data-role="fieldcontain" class="ui-field-contain ui-body ui-br">
                <label for="setupname">Study/Experiment Name:</label>
                <input type="text" name="setupname" id="setupname" class="req" value="" data-mini="true"/>
            </div>  
            <!-- Observation interval-->
            <div data-role="fieldcontain">
                <fieldset data-role="controlgroup" data-type="horizontal">
                    <legend>Observation Interval:</legend>
                    <label for="select-choice-hours">hr(s)</label>
                    <select name="select-choice-hours" id="select-choice-hours" class="interval req" data-mini="true">

                    </select>
                
                    <label for="select-choice-mins">min(s)</label>
                    <select name="select-choice-mins" id="select-choice-mins" class="interval req" data-mini="true">
                        
                    </select>
                
                    <label for="select-choice-secs">secs</label>
                    <select name="select-choice-secs" id="select-choice-secs" class="interval req" data-mini="true">
                       
                    </select>
                    
                </fieldset>
            </div>
            <!--Length of Session -->
            
               
            <legend><h4>Length of Session:</h4></legend>
            <h6>The length of the session is a multiple of the interval you selected above.</h6>
            
            <div data-role="fieldcontain">
               <label for="sessionlength" class="select"></label>
               <select name="sessionlength" id="sessionlength" class="req" data-mini="true">
                    <option value="">Please Select:</option>
               </select>
            </div>

            <!--Alarms-->
            <div data-role="fieldcontain">
               <label for="select-choice-alarm" class="select">Alarm:</label>
               <select name="select-choice-alarm" id="select-choice-alarm" class="req" data-mini="true">
                  <option value="">Please Select:</option>
                  <option value="sirencont">Siren (Continuous)</option>
                  <option value="beeps">Beeps (Continuous)</option>
                 <option value="vibrate">Vibrate</option>
                 <option value="ding">One Ding</option>
                  <option value="beep">One Beep</option>
 
               </select>
               <p style="font-size: 0.75em">Single tones are only recommended for very short observation intervals.</p>
            </div>
            <!--Included in obs -->
            <div align="center">
                <h3>Include in Observations:</h3>
            </div>
            <p>Date & Time</p>
            <p>Notes/Comments</p>
            <label><input type="checkbox" name="numfieldcheckbox" id="numfieldcheckbox" />Number Field</label>
            
            <div data-role="fieldcontain" name="numfieldtype" id="numfieldtype" class="ui-radio ui-disabled"> 
                <fieldset data-role="controlgroup" data-mini="true">
                    <legend>Number Field Type:</legend>
                    <input type="radio" name="radio-choice" id="radio-choice-1" value="Other" checked="checked">
                    <label for="radio-choice-1">Other</label>

                    <input type="radio" name="radio-choice" id="radio-choice-2" value="km" >
                    <label for="radio-choice-2">km</label>

                    <input type="radio" name="radio-choice" id="radio-choice-3" value="m"  >
                    <label for="radio-choice-3">m</label>

                    <input type="radio" name="radio-choice" id="radio-choice-4" value="cm"  >
                    <label for="radio-choice-4">cm</label>
                </fieldset>
            </div>   

            <label><input id="checkboxcheckbox" type="checkbox" name="checkboxcheckbox"/>Checkbox</label>
            <div id="checkboxname" data-role="fieldcontain" class="ui-field-contain ui-body ui-br ui-disabled">
                <label for="checkbox">Checkbox Name:</label>
                <input type="text" name="checkboxname" id="checkboxinput" value="" data-mini="true"/>
            </div> 

            

            <!--Bottom Buttons-->
            <div data-role="controlgroup">
                <a href="#homeloggedin" data-role="button" >Cancel</a>
                <div class="ui-disabled" id="continuebutt"> <!--This needs to be enabled when name, interval, alarm, and length have been selected/filled in-->
                    <a href="#confirmpage" data-role="button"  onclick="utilfunc.setupbutton();">Continue</a>
                </div>
            </div>
        </div><!-- /content -->
    </div><!-- /page -->
<!-- Start of Acct Info page 
    <div data-role="page" id="accountinfo">
        <div data-role="header">
            <h1>Field and Lab Notebook</h1>
            <a href="#homeloggedin" data-role="button" data-icon="home" class="ui-btn-right">Home</a>
        </div> /header 
        <div data-role="content">
            <div align="center">
                <p><h2>Your Account</h2></p>
            </div> 
        </div>
    </div> end of page
-->



<!-- Start of Confirm Setup Page -->
    <div data-role="page" id="confirmpage">
        <div data-role="header">
            <h1>Field and Lab Notebook</h1>
            <a href="#homeloggedin" data-role="button" data-icon="home" class="ui-btn-right">Home</a>
        </div>
        <div data-role="content">
            <div align="center">
                <h2>Confirm Setup</h2>
            </div>
            <p id="confirmname" class="studyname"> <strong>Name: </strong> </p>
            <p id="confirmint"> <strong>Observation Interval: </strong></p>
            <p id="confirmlength"> <strong>Session Length: </strong></p>
            <p id="confirmalarm"> <strong>Alarm: </strong></p>
            <p>Include in Observations:</p>
            <ul id="includelist">
                <li>Date & Time</li>
                <li>Notes/Comments</li>
            </ul>
            <!--Bottom Buttons! -->
            <div data-role="controlgroup">
                <div class="" id="confirmbutt"> 
                    <a href="#countdownpage" id="startsession" data-role="button" onclick="timer.countdown(); timer.obcountdowns(); database.initialize($('#setupname').val());">Confirm & Start Observations</a>
                </div>
                <a href="#newsetup" data-role="button" >Change Setup</a>
            </div>
        </div>
    </div>
<!-- Countdown Page -->
    <div data-role="page" id="countdownpage">
         <div data-role="header">
            <h1>Field and Lab Notebook</h1>
            <a href="#homeloggedin" data-role="button" data-icon="home" class="ui-btn-right">Home</a>
        </div>
        <div data-role="content" align="center">
            <h2 class="studyname"></h2>
            <p>Please wait to start your first observation:</p>
            <p style="font-size: 5em"><span align="center" id="countdown"></span></p>
        </div>
    </div>
<!-- Alarm Page 
This page needs to push alarm and have sound/vibrate-->
    <div data-role="page" id="alarmpage">
        <div data-role="header">
            <h1>Field and Lab Notebook</h1>
            <a href="#homeloggedin" data-role="button" data-icon="home" class="ui-btn-right">Home</a>
        </div>
        <div data-role="content" align="center">
            <h2 class="studyname">Working On: </h2>
            <p>Ready for Observation!</p>
            <a href="#observationpage" id="stopalarm" data-role="button" onclick="utilfunc.dateandtime();">Start This Observation</a>
        </div>
    </div>
<!-- Observation Page -->
    <div data-role="page" id="observationpage">
        <div data-role="header">
            <h1>Field and Lab Notebook</h1>
            <a href="#homeloggedin" data-role="button" data-icon="home" class="ui-btn-right">Home</a>
        </div>
        <div data-role="content">
            <p class="studyname">Study: </p>
            <p id="thisob">Observation # </p>
            <p style="font-size: 0.75em">Date: <span class="date"></span></p>
            <p style="font-size: 0.75em">Time: <span class="time"></span></p>

            <label for="notes">Notes/Comments:</label>
            <textarea name="notestext" class="thenotes"></textarea>
            <div class="xtras"></div>
            <a href="#interimpage" id="saveandcont" data-role="button" onclick="utilfunc.saveob();" >Finish & Save</a>
            <p>Time left until next observation:</p>
            <p><span id="timeleftint1"></span></p>
            <p>Time left in session:</p>
            <p><span id="timeleftsession1"></span></p>
        </div>
    </div>

    <div id="numbersection">
        <label for="numberinput" id="numberlabel">Number field: </label>
        <input type="number" name="number" pattern="[0-9]*" id="numberinput" class="ui-input-text ui-body-c ui-corner-all ui-shadow-inset">
    </div>

    <div id="checkboxsection">
        <label id="checkboxlabel"><input id="customcheckbox" type="checkbox" name="customcheckbox"/></label>
    </div>


<!-- Interim Page-->
    <div data-role="page" id="interimpage">
        <div data-role="header">
            <h1>Field and Lab Notebook</h1>
            <a href="#homeloggedin" data-role="button" data-icon="home" class="ui-btn-right">Home</a>
        </div>
        <div data-role="content" align="center">
             <h2 class="studyname">Working On: </h2>
             <p>Time left until next observation:</p>
             <p><span id="timeleftint2"></span></p>
             <p>Time left in session:</p>
             <p><span id="timeleftsession2"></span></p>
        </div>
    </div>

<!--Final Alarm Page 
This page needs to push an alarm and also make sound/vibrate-->
    <div data-role="page" id="finalalarm">
        <div data-role="header">
            <h1>Field and Lab Notebook</h1>
            <a href="#homeloggedin" data-role="button" data-icon="home" class="ui-btn-right">Home</a>
        </div>
        <div data-role="content" align="center">
            <h2 class="studyname">Working On: </h2>
            <p>Ready for Last Observation!</p>
            <a href="#finalobservation" id="stopalarm" data-role="button" onclick="utilfunc.dateandtime();">Start Final Observation</a>
        </div>
    </div>

<!-- Final Observation-->
    <div data-role="page" id="finalobservation">
        <div data-role="header">
            <h1>Field and Lab Notebook</h1>
            <a href="#homeloggedin" data-role="button" data-icon="home" class="ui-btn-right">Home</a>
        </div>
        <div data-role="content">
            <h3>FINAL OBSERVATION</h3>
            <p class="studyname">Study: </p>
            <p style="font-size: 0.75em">Date: <span class="date"></span></p>
            <p style="font-size: 0.75em">Time: <span class="time"></span></p>

            <label for="notes">Notes/Comments:</label>
            <textarea name="notestext" class="thenotes"></textarea>
            <div class="xtras"></div>
            <a href="#exportpage" id="lastsaveandcont" data-role="button" onclick="utilfunc.saveob();" >Finish & Save</a>
        </div>
    </div>


<!--export page-->
    <div data-role="page" id="exportpage">
        <div data-role="header">
            <h1>Field and Lab Notebook</h1>
            <a href="#homeloggedin" data-role="button" data-icon="home" class="ui-btn-right">Home</a>
        </div>
        <div data-role="content">
            <h2 align="center">Export File</h2>
            <p>Your observations are currently saved locally on your phone. You can now export this session to either dropbox.com or an email address as an excel file.</p>

            <div data-role="fieldcontain" name="exportoptions" id="exportoptions" class="ui-radio"> 
                <fieldset data-role="controlgroup" data-mini="true">
                    <legend>Choose One:</legend>
                    <input type="radio" name="radio-choice" id="choosedb" value="db" />
                    <label for="choosedb">dropbox.com</label>
                    <input type="radio" name="radio-choice" id="chooseemail" value="email"  />
                    <label for="chooseemail">email</label>
                </fieldset>
            </div>   
            <span id="dropboxinfo" class="ui-disabled">
                <label for="dropboxacct">Dropbox.com account (email):</label>
                <input  type="text" name="dropboxacct" id="dropboxacct" value="" data-mini="true"/>
            </span>
            <span id="emailinfo" class="ui-disabled">
                <label for="emailacct">Email address:</label>
                <input  type="text" name="emailacct" id="emailacct" value="" data-mini="true"/>
            </span>
        </div>
    </div>




    <!--
REMOVE THE EXTRA HOME BUTTONS BEFORE SHOWING
    -->
</body>
</html> 
